<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black" />
        <title>Exchange</title>
        
                <!-- Adapted from API panel example-->
                <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css">
                <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
                <script src="http://www.parsecdn.com/js/parse-1.2.1.min.js"></script>
                
                <!-- Link css and js files -->
                <link rel="stylesheet" href="css/my.css" />
                <script src="js/handlebars.js"></script>
                <script src="js/Exchange/ExchangeTest.js"></script>
				<script src="js/Exchange/ExchangeUpdate.js"></script>
                <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>

    </head>
    <body>
        <!-- Main page -->
        <div data-role="page" data-url ="exchange-main" id="exchange-main" class="ui-responsive-panel">
            <!-- Header -->
            <div data-role="header" data-theme="a" data-position="fixed">
                <h3 class="headerTitle">Exchange</h3>
				<a href="#nav-panel" data-icon="bars" data-iconpos="notext">Menu</a>
            </div>
			<!-- Content -->
            <div data-role="content" class="jqm-content">
				<!-- Input text box; not search -->
				<ul data-role="listview" data-inset="true" data-divider-theme="a" class="listLook">
					<li data-role="list-divider">People Search</li>
					<li><div class="ui-grid-a" id="inputBar">
						<div class="ui-block-a">
							<label for="exchangeInput" class="ui-hidden-accessible">Enter E-mail or ID: </label>
							<input name="exchangeInput" id="exchangeInput" placeholder="Enter E-mail or ID" value="" type="text">
						</div>
						<div class="ui-block-b">
							<a href="#exchange-new" id="submitButton" onclick="searchContact()" data-role="button" data-mini="true">Go</a>
						</div>
					</div></li>
				</ul>
				
				<!-- Listview for saved exchanges -->
				<div id = "recentExchangesdiv">
					<script id="recentexchanges-template" type="text/x-handlebars-template">
					<ul data-role="listview" data-inset="true"  data-divider-theme="a" id="savedExchanges" class="listLook" data-icon="edit">
						<li data-role="list-divider"> Recent Exchanges </li>                                    
							{{#recentExchanges}}
									<li id = "{{id}}"><a id = "{{id}}" onclick = "" href="#exchange-details">
											<img id = "{{id}}" src="images/person1.PNG" alt="Photo">
											<h2 id = "{{id}}">{{to_name}}</h2>
											<p id = "{{id}}">{{comments}}</p>
											<p id = "{{id}}"><em>Exchanged @ {{time}}</em></p>
										</a>
									</li>
							{{/recentExchanges}}
						<li id = "viewAllExchangesLink" data-icon="arrow-r"><a href="#exchange-all" onclick = "">
							<span>View all exchanges</span>
						</a></li>
					</ul>
					</script>
				</div>                             
            </div>
            <!-- Navigation panel -->
			<div data-role="panel" data-position-fixed="true"  data-display="reveal" data-theme="a" id="nav-panel">
				<ul data-role="listview" data-theme="a" class="nav-search">
					<li><a href="home.html#home-main" rel="external">
						<img src="images/Home_1.png" alt="Home">Home
					</a></li>
					<li><a href="checkin.html#checkin-main" rel="external">
						<img src="images/Check_In_1.png" alt="Check In">Check In
					</a></li>
					<li><a href="#exchange-main" data-rel="close">
						<img src="images/Exchange_1.png" alt="Exchange">Exchange
					</a></li>
					<li><a href="microblog.html#microblog-main" rel="external">
						<img src="images/Microblog_1.png" alt="Microblog">Microblog
					</a></li>
					<li><a href="people.html#people-main" rel="external">
						<img src="images/People_1.png" alt="People">People
					</a></li>
				</ul>
			</div>
        </div>
                
        <!-- All exchanges page -->
        <div data-role="page" data-url ="exchange-all" id="exchange-all" class="ui-responsive-panel">
            <!-- Header -->
            <div data-role="header" data-theme="a" data-position="fixed">
                <h3 class="headerTitle">All Exchanges</h3>
                <a href="#" data-rel="back" data-icon="back" data-iconpos="notext">Back</a>
            </div>
			<!-- Content -->
            <div data-role="content" class="jqm-content">
				<div id="allExchangesdiv">
				<script id="allexchanges-template" type="text/x-handlebars-template">
					<ul data-role="listview" id="allExchanges" data-autodividers="true" data-filter="true" 
					data-inset="true"  data-divider-theme="a" data-filter-placeholder="Find an exchange" class="listLook" data-icon="edit">
						{{#allExchanges}}	
								<li id = "{{id}}"><a id = "{{id}}" onclick = "" href="#exchange-details">
										<img id = "{{id}}" src="images/person3.PNG" alt="Photo">
										<h2 id = "{{id}}">{{to_name}}</h2>
										<p id = "{{id}}">{{comments}}</p>
										<p id = "{{id}}"><em>Posted on {{time}}</em></p>
								</a></li>
						{{/allExchanges}}
					</ul>
				</script>
				</div>
            </div>
        </div>
        
		<!-- Details page -->
        <div data-role="page" data-url ="exchange-details" id="exchange-details" class="ui-responsive-panel">
			<!-- Header -->
            <div data-role="header" data-theme="a" data-position="fixed">
                <h3 class="headerTitle">Exchange Details</h3>
            </div>
			<!-- Content -->
			<div data-role="content" class="jqm-content">
				<div id="exchangedetailsdiv">
				<script id="exchangedetails-template" type="text/x-handlebars-template">
					<ul data-role="listview" data-inset="true" data-divider-theme="a">
						<li data-role="list-divider">
							<h1>{{name}}</h1>
						</li>
						<li><div class="exchangeDetails ui-grid-a">
							<div class="ui-block-a">
								<img src="images/person1.PNG" alt="Photo" class="portrait">
							</div>
							<div class="ui-block-b">
								<table class="personDetails">
									<tr>
										<th>Email:</th> <td>{{email}}</td>
									</tr>
									<tr>
										<th>Place:</th> <td>{{location}}</td>
									</tr>
									<tr>
										<th>Dept:</th> <td>{{department}}</td>
									</tr>
									<tr>
										<th>Title:</th> <td>{{title}}</td>
									</tr>
									<tr>
										<th>Date:</th> <td>{{time}}</td>
									</tr>
								</table>
							</div>
						</div></li>
						<li><div class="noteField">
							<label for="savedNote" class="ui-hidden-accessible">Add note (visible to you only)</label>
							<textarea cols="40" rows="8" name="savedNote" id="savedNote" placeholder="Add note (visible to you only)">{{comments}}</textarea>
							<div class="options">
								<strong>Attach:</strong>
								<button class = "buttonCam" data-mini="true"  onclick="cameraFunction()" data-inline="true" data-icon="camera" data-iconpos="notext">Photo/Video</button>
								<button class = "buttonMic" data-mini="true"  onclick="micFunction()" data-inline="true" data-icon="microphone" data-iconpos="notext">Voice Note</button>
							</div>
						</div></li>
						<li><div class="ui-grid-a">
							<div class="ui-block-a">
								<a id = "cancelNoteButton" href="#exchange-main" onclick = "" data-role="button">Cancel</a>
							</div>
							<div class="ui-block-b">
								<button id = "saveNoteButton" class = "buttonSave" type = "button" onclick="" data-theme="a">Save</button>
							</div>
						</div></li>
					</ul>
				</script>
				</div>
            </div>
        </div>
                
        <!-- New exchange page -->
        <div data-role="page" data-url ="exchange-new" id="exchange-new" class="ui-responsive-panel">
			<!-- Header -->
            <div data-role="header" data-theme="a" data-position="fixed">
                <h3 class="headerTitle">Exchange Details</h3>
            </div>
			<!-- Content -->
			<div data-role="content" class="jqm-content">
				<div id="newexchange-div">
				<script id="newexchange-template" type="text/x-handlebars-template">
					<ul data-role="listview" data-inset="true" data-divider-theme="a">
						<li data-role="list-divider">
							<h1>{{name}}</h1>
						</li>
						<li><div class="exchangeDetails ui-grid-a">
							<div class="ui-block-a">
								<img src="images/personNew.PNG" alt="Photo" class="portrait"> 
							<!--	<img src="{{picture}}" alt="Photo" class="portrait"> -->
							</div>
							<div class="ui-block-b">
								<table class="personDetails">
									<tr>
										<th>Email:</th> <td>{{email}}</td>
									</tr>
									<tr>
										<th>Place:</th> <td>{{location}}</td>
									</tr>
									<tr>
										<th>Dept:</th> <td>{{department}}</td>
									</tr>
									<tr>
										<th>Title:</th> <td>{{title}}</td>
									</tr>
								</table>
							</div>
						</div></li>
						<li><div class="noteField">
							<label for="inputNote" class="ui-hidden-accessible">Add note (visible to you only)</label>
							<textarea cols="40" rows="8" name="inputNote" id="inputNote" placeholder="Add note (visible to you only)"></textarea>
							<div class="options">
								<strong>Attach:</strong>
								<button class = "buttonCam" data-mini="true" onclick="cameraFunction()" data-inline="true" data-icon="camera" data-iconpos="notext">Photo/Video</button>
								<button class = "buttonMic" data-mini="true" onclick="micFunction()" data-inline="true" data-icon="microphone" data-iconpos="notext">Voice Note</button>
							</div>
						</div></li>
						<li><div class="options ui-grid-a">
							<div class="ui-block-a">
								<a id = "cancelExchange" onclick = "" data-role="button">Cancel</a>
							</div>
							<div class="ui-block-b">
								<button class = "buttonExchange" id = "exchangeConfirm" type = "button" onclick = "" data-theme="b">Exchange</button>
							</div>
						</div></li>
					</ul>				
				</script>
				</div>                
            </div> 
        </div>  
    </body>
</html>