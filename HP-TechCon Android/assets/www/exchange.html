<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black" />
        <title>Exchange</title>
        
                <!-- Adapted from API panel example-->
                <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css">
                <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
                <script src="http://www.parsecdn.com/js/parse-1.2.1.min.js"></script>
                
                <!-- Link css and js files -->
                <link rel="stylesheet" href="css/my.css" />
                <script src="js/handlebars.js"></script>
                <script src="js/my.js"></script>
                <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>

    </head>
    <body>
        <!-- Main page -->
        <div data-role="page" data-url ="exchange-main" id="exchange-main" class="ui-responsive-panel">
                        <!-- Header -->
            <div data-role="header" data-theme="b" data-position="fixed">
                <h3 class="headerTitle">Exchange</h3>
                                <a href="home.html#home-main" rel="external" data-icon="home" data-iconpos="notext left">Home</a>
                                <a href="#exchange-all" onclick = "allExchanges()" data-icon="arrow-r" data-iconpos="right">More</a>
            </div>
            <div data-role="content" class="jqm-content">
                                <!-- Input text box; not search -->
                                <div class="ui-grid-a" id="inputBar">
                                        <div class="ui-block-a">
                                            <label for="exchangeInput" class="ui-hidden-accessible">Enter E-mail or ID: </label>
                                            <input name="exchangeInput" id="exchangeInput" placeholder="Enter E-mail or ID" value="" type="text">
                                        </div>
                                        <div class="ui-block-b">
                                            <a href="#exchange-new" id="submitButton" onclick="searchContact()" data-role="button" data-mini="true">Go</a>
                                        </div>
                                </div>
                                
                                <!-- Listview for saved exchanges -->
                                <div id = "recentExchangesdiv">
                                        <script id="recentexchanges-template" type="text/x-handlebars-template">
                                        <ul data-role="listview" data-inset="true"  data-divider-theme="b" id="savedExchanges" class="listLook">
                                        <li data-role="list-divider"> Recent Exchanges </li>                                    
                                                {{#recentExchanges}}
                                                        <li id = "{{id}}"><a onclick = "exchangeDetails('{{id}}')" href="#exchange-details">
                                                                <img src="images/person1.PNG" alt="Photo">
                                                                <h2>{{to_name}}</h2>
                                                                <p>{{comments}}</p>
                                                                <p class="ui-li-aside">{{time}}</p>
															</a>
														</li>
                                                {{/recentExchanges}}
                                        </ul>
                                        </script>
                                </div>                             
            </div>
                        <div data-role="panel" data-position-fixed="true"  data-display="reveal" data-theme="a" id="nav-panel">
                                <ul data-role="listview" data-theme="b" class="nav-search">
                                        <li><a href="home.html#home-main" rel="external">Home</a></li>
                                        <li><a href="#">Check In</a></li>
                                        <li><a href="#exchange-main">Exchange</a></li>
                                        <li><a href="#">Microblog</a></li>
                                </ul>
                        </div>
        </div>
                
                <!-- All exchanges page -->
        <div data-role="page" data-url ="exchange-all" id="exchange-all" class="ui-responsive-panel">
                        <!-- Header -->
            <div data-role="header" data-theme="b" data-position="fixed">
                <h3 class="headerTitle">All Exchanges</h3>
                                <a href="#exchange-main" data-icon="back" data-iconpos="notext">Back</a>
            </div>
            <div data-role="content" class="jqm-content">                               
                                <!-- Listview for all exchanges; NOTE: I tried autodividers; will not work --> 
								
							<div id = "allExchangesdiv">
								<script id="allexchanges-template" type="text/x-handlebars-template">
									<ul data-role="listview" id="allExchanges" data-autodividers="false" data-filter="true" data-inset="false"  data-divider-theme="b" class="listLook">
										{{#allExchanges}}	
											<li id = "{{id}}"><a onclick = "exchangeDetails('{{id}}')" href="#exchange-details">
													<img src="images/person3.PNG" alt="Photo">
													<h2>{{to_name}}</h2>
													<p>{{comments}}</p>
													<p class="ui-li-aside">{{time}}</p>
											</a></li>
										{{/allExchanges}}
									</ul>
								</script>	
							</div>	
            </div>
        </div>
                
                <!-- Details page -->
        <div data-role="page" data-url ="exchange-details" id="exchange-details" class="ui-responsive-panel">
                        <!-- Header -->
            <div data-role="header" data-theme="b" data-position="fixed">
                <h3 class="headerTitle">Exchange Details</h3>
            </div>
                        <div data-role="content" class="jqm-content">
                <div class="exchangeDetails ui-grid-a">
                    <div class="ui-block-a">
                                                <img src="images/person1.PNG" alt="Photo" class="portrait">
                    </div>
                    <div id = "exchangedetailsdiv" class="ui-block-b">
									<script id="exchangedetails-template" type="text/x-handlebars-template">
                                                <table class="personDetails">
                                                        <tr>
                                                                <th colspan="2">{{name}}</th>
                                                        </tr>
                                                        <tr>
                                                                <td>E-mail:</td>
                                                                <td>{{email}}</td>
                                                        </tr>
                                                        <tr>
                                                                <td>Location:</td>
                                                                <td>{{location}}</td>
                                                        </tr>
                                                        <tr>
                                                                <td>Department:</td>
                                                                <td>{{department}}</td>
                                                        </tr>
                                                        <tr>
                                                                <td>Title:</td>
                                                                <td>{{title}}</td>
                                                        </tr>
                                                        <tr>
                                                                <td>Exchanged:</td>
                                                                <td>{{time}}</td>
                                                        </tr>
                                                </table>
									</script>			
                    </div>
                                </div>
                                <br />
                                <div class="noteField">
                                        <label for="savedNote" class="ui-hidden-accessible">Add note (visible to you only)</label>	
								<div id = "exchangedetailscommentsdiv">
									<script id="exchangedetailscomments-template" type="text/x-handlebars-template">	
                                        <textarea cols="40" rows="8" name="savedNote" id="savedNote" placeholder="Add note (visible to you only)">{{comments}}</textarea>
									</script>
								</div>
                                </div>
                                <div class="options ui-grid-a">
                    <div class="ui-block-a">
                                                <button class = "buttonCam" data-mini="true"  onclick="cameraFunction()" data-inline="true" data-icon="camera" data-iconpos="notext">Photo/Video</button>
                                                <button class = "buttonMic" data-mini="true"  onclick="micFunction()" data-inline="true" data-icon="microphone" data-iconpos="notext">Voice Note</button>
                    </div>
                    <div class="ui-block-b">

                    </div>
                    <div class="ui-block-a">
                                                <a href="#exchange-main" onclick = "reload()" data-role="button">Cancel</a>
                    </div>
                    <div class="ui-block-b">
                                                <button class = "buttonSave" type = "button" onclick="saveExchangeNotes()" data-theme="b">Save</button>
                    </div>
                </div>
            </div>
        </div>
                
                <!-- New exchange page -->
        <div data-role="page" data-url ="exchange-new" id="exchange-new" class="ui-responsive-panel">
                        <!-- Header -->
            <div data-role="header" data-theme="b" data-position="fixed">
                <h3 class="headerTitle">Exchange Details</h3>
            </div>
                        <div data-role="content" class="jqm-content">
                <div class="exchangeDetails ui-grid-a">
                    <div class="ui-block-a">
                                                <img src="images/personNew.PNG" alt="Photo" class="portrait">
                    </div>
                    <div id = "newexchange-div" class="ui-block-b">
                                        <script id="newexchange-template" type="text/x-handlebars-template">
                                                <table class="personDetails">
                                                        <tr>
                                                                <th colspan="2">{{name}}</th>
                                                        </tr>
                                                        <tr>
                                                                <td>E-mail:</td>
                                                                <td>{{email}}</td>
                                                        </tr>
                                                        <tr>
                                                                <td>Location:</td>
                                                                <td>{{location}}</td>
                                                        </tr>
                                                        <tr>
                                                                <td>Department:</td>
                                                                <td>{{department}}</td>
                                                        </tr>
                                                        <tr>
                                                                <td>Title:</td>
                                                                <td>{{title}}</td>
                                                        </tr>
                                                </table>
                                        </script>
                    </div>
                                </div>
                                <br />
                                <div class="noteField">
                                        <label for="inputNote" class="ui-hidden-accessible">Add note (visible to you only)</label>
                                        <textarea cols="40" rows="8" name="inputNote" id="inputNote" placeholder="Add note"></textarea>
                                </div>
                                <div class="options ui-grid-a">
                    <div class="ui-block-a">
                                                <button class = "buttonCam" data-mini="true"  onclick="cameraFunction()" data-inline="true" data-icon="camera" data-iconpos="notext">Photo/Video</button>
                                                <button class = "buttonMic" data-mini="true"  onclick="micFunction()" data-inline="true" data-icon="microphone" data-iconpos="notext">Voice Note</button>
                    </div>
                    <div class="ui-block-b">
                    </div>
                    <div class="ui-block-a">
                                               <!-- <a href="#exchange-main" onclick = "reload()" data-role="button">Cancel</a> -->
											   <a onclick = "reload()" data-role="button">Cancel</a>
                    </div>
                    <div class="ui-block-b">
                                                <button class = "buttonExchange" type = "button" onclick = "exchangeConfirm()" data-theme="b">Exchange</button>
                    </div>
                </div>
            </div>
        </div>  
    </body>
</html>